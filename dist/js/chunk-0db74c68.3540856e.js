(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db74c68"],{2532:function(t,s,e){"use strict";var a=e("23e7"),r=e("5a34"),i=e("1d80"),c=e("ab13");a({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,s,e){var a=e("44e7");t.exports=function(t){if(a(t))throw TypeError("The method doesn't accept regular expressions");return t}},"81b1":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container ec-container",staticStyle:{"margin-top":"7rem","margin-bottom":"5rem"}},[t.products.length>0?e("div",{staticClass:"row product"},[e("div",{staticClass:"col-lg-2 col-md-3 mb-3"},[e("ul",{staticClass:"list-group sticky-top rounded-0"},[e("a",{staticClass:"list-group-item list-group-item-action",class:{active:""===t.filterCategory},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.filterCategory=""}}},[t._v(" 全部商品 ")]),t._l(t.categories,(function(s){return e("a",{key:s,staticClass:"list-group-item list-group-item-action",class:{active:s===t.filterCategory},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.filterCategory=s}}},[t._v(" "+t._s(s)+" ")])}))],2)]),e("div",{staticClass:"col-lg-10 col-md-9"},[e("div",{staticClass:"row"},t._l(t.filterCategories,(function(s){return e("div",{key:s.id,staticClass:"col-lg-4 col-sm-6 mb-5"},[e("div",{staticClass:"top"},[e("router-link",{attrs:{to:"/product/"+s.id}},[e("div",{staticClass:"picture",style:{backgroundImage:"url("+s.imageUrl[0]+")"}})]),e("div",{staticClass:"tag bg-primary"},[e("span",{on:{click:function(e){return t.addToTrack(s.id)}}},[-1===t.followed.indexOf(s.id)?e("i",{staticClass:"fas fa-heart"}):e("i",{staticClass:"fas fa-heart heart"})])])],1),e("div",{staticClass:"bottom"},[e("router-link",{attrs:{to:"/product/"+s.id}},[e("h4",{staticClass:"mt-3 mb-2"},[t._v(" "+t._s(s.title)+" ")])]),e("p",{staticClass:"card-text mb-0 price"},[t._v(t._s(t._f("currency")(s.price))+" "),e("span",{staticClass:"text-muted"},[e("del",[t._v(t._s(t._f("currency")(s.origin_price)))])])]),e("p",{staticClass:"text-muted",staticStyle:{"font-size":"12px"}},[t._v(t._s(s.content))]),e("button",{staticClass:"btn btn-primary mt-2 btn-block text-white",on:{click:function(e){return t.addToCart(s)}}},[t.statusId===s.id?e("b-spinner",{attrs:{small:"",type:"grow"}}):t._e(),t._v(" 加入購物車 ")],1)],1)])})),0)])]):t._e(),e("router-link",{staticClass:"cart px-2 py-3 bg-primary",attrs:{to:"/cart"}},[e("CartIcon")],1)],1)},r=[],i=(e("99af"),e("4de4"),e("caad"),e("c975"),e("a434"),e("2532"),e("f462")),c={components:{CartIcon:i["a"]},data:function(){return{followed:JSON.parse(localStorage.getItem("followList"))||[],products:[],statusId:"",categories:["沙拉","早餐套餐","水果拼盤"],filterCategory:""}},methods:{getProducts:function(){var t=this,s=this.$loading.show(),e="".concat("https://course-ec-api.hexschool.io/api","/").concat("e9fd54ce-9d42-40cb-ba4e-14553d1d6375","/ec/products");this.$http.get(e).then((function(e){t.products=e.data.data;var a=t.$route.params.categoryName;a&&(t.filterCategory=a),s.hide()})).catch((function(s){t.$swal("獲取清單列表失敗",s.response.data.errors[0],"error")}))},addToCart:function(t){var s=this;this.statusId=t.id;var e="".concat("https://course-ec-api.hexschool.io/api","/").concat("e9fd54ce-9d42-40cb-ba4e-14553d1d6375","/ec/shopping"),a={product:t.id,quantity:1};this.$http.post(e,a).then((function(){s.$bus.$emit("quantity",a.quantity),s.statusId="",s.$swal("產品添加成功","請至購物車結帳","success")})).catch((function(t){s.statusId="",s.$swal("商品重複",t.response.data.errors[0],"error")}))},addToTrack:function(t){var s=this.followed.indexOf(t);-1===s?(this.followed.push(t),this.$swal("已加入追蹤","","success")):(this.followed.splice(s,1),this.$swal("已取消追蹤","","success")),localStorage.setItem("followList",JSON.stringify(this.followed))}},computed:{filterCategories:function(){var t=this;return this.filterCategory?this.products.filter((function(s){var e=s.category.toLowerCase().includes(t.filterCategory.toLowerCase());return e})):this.products}},created:function(){this.getProducts()}},o=c,n=(e("ac44"),e("2877")),l=Object(n["a"])(o,a,r,!1,null,null,null);s["default"]=l.exports},ab13:function(t,s,e){var a=e("b622"),r=a("match");t.exports=function(t){var s=/./;try{"/./"[t](s)}catch(e){try{return s[r]=!1,"/./"[t](s)}catch(a){}}return!1}},ac44:function(t,s,e){"use strict";var a=e("dc16"),r=e.n(a);r.a},caad:function(t,s,e){"use strict";var a=e("23e7"),r=e("4d64").includes,i=e("44d2"),c=e("ae40"),o=c("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!o},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},dc16:function(t,s,e){}}]);
//# sourceMappingURL=chunk-0db74c68.3540856e.js.map