(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0db74c68"],{2532:function(t,s,a){"use strict";var e=a("23e7"),r=a("5a34"),i=a("1d80"),c=a("ab13");e({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~String(i(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"5a34":function(t,s,a){var e=a("44e7");t.exports=function(t){if(e(t))throw TypeError("The method doesn't accept regular expressions");return t}},"81b1":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.products.length>0?a("div",{staticClass:"container",staticStyle:{"margin-top":"7rem","margin-bottom":"8rem"}},[a("div",{staticClass:"row product"},[a("div",{staticClass:"col-lg-2 col-md-3 mb-3"},[a("ul",{staticClass:"list-group sticky-top rounded-0"},[a("a",{staticClass:"list-group-item list-group-item-action",class:{active:""===t.filterCategory},attrs:{href:"#"},on:{click:function(s){s.preventDefault(),t.filterCategory=""}}},[t._v(" 全部商品 ")]),t._l(t.categories,(function(s){return a("a",{key:s,staticClass:"list-group-item list-group-item-action",class:{active:s===t.filterCategory},attrs:{href:"#"},on:{click:function(a){a.preventDefault(),t.filterCategory=s}}},[t._v(" "+t._s(s)+" ")])}))],2)]),a("div",{staticClass:"col-lg-10 col-md-9"},[a("div",{staticClass:"row"},t._l(t.filterCategories,(function(s){return a("div",{key:s.id,staticClass:"col-lg-4 col-sm-6 mb-5"},[a("div",{staticClass:"top"},[a("router-link",{attrs:{to:"/product/"+s.id}},[a("div",{staticClass:"picture",style:{backgroundImage:"url("+s.imageUrl[0]+")"}})]),a("div",{staticClass:"tag bg-primary"},[a("span",{on:{click:function(a){return t.addToTrack(s.id)}}},[-1===t.followed.indexOf(s.id)?a("i",{staticClass:"fas fa-heart"}):a("i",{staticClass:"fas fa-heart heart"})])])],1),a("div",{staticClass:"bottom"},[a("router-link",{attrs:{to:"/product/"+s.id}},[a("h4",{staticClass:"mt-3 mb-2"},[t._v(" "+t._s(s.title)+" ")])]),a("p",{staticClass:"card-text mb-0 price"},[t._v(t._s(t._f("currency")(s.price))+" "),a("span",{staticClass:"text-muted"},[a("del",[t._v(t._s(t._f("currency")(s.origin_price)))])])]),a("p",{staticClass:"text-muted",staticStyle:{"font-size":"8px"}},[t._v(t._s(s.content))]),a("button",{staticClass:"btn btn-primary mt-2 btn-block text-white",on:{click:function(a){return t.addToCart(s)}}},[t.statusId===s.id?a("b-spinner",{attrs:{small:"",type:"grow"}}):t._e(),t._v(" 加入購物車 ")],1)],1)])})),0)])]),a("router-link",{staticClass:"cart px-2 py-3 bg-primary",attrs:{to:"/cart"}},[a("CartIcon")],1)],1):t._e()},r=[],i=(a("99af"),a("4de4"),a("caad"),a("c975"),a("a434"),a("2532"),a("f462")),c={components:{CartIcon:i["a"]},data:function(){return{followed:JSON.parse(localStorage.getItem("followList"))||[],products:[],statusId:"",categories:["沙拉","早餐套餐","水果拼盤"],filterCategory:""}},methods:{getProducts:function(){var t=this,s=this.$loading.show(),a="".concat("https://course-ec-api.hexschool.io/api","/").concat("e9fd54ce-9d42-40cb-ba4e-14553d1d6375","/ec/products");this.$http.get(a).then((function(a){t.products=a.data.data;var e=t.$route.params.categoryName;e&&(t.filterCategory=e),s.hide()})).catch((function(s){t.$swal("獲取清單列表失敗",s.response.data.errors[0],"error")}))},addToCart:function(t){var s=this;this.statusId=t.id;var a="".concat("https://course-ec-api.hexschool.io/api","/").concat("e9fd54ce-9d42-40cb-ba4e-14553d1d6375","/ec/shopping"),e={product:t.id,quantity:1};this.$http.post(a,e).then((function(){s.$bus.$emit("quantity",e.quantity),s.statusId="",s.$swal("產品添加成功","請至購物車結帳","success")})).catch((function(t){s.statusId="",s.$swal("商品重複",t.response.data.errors[0],"error")}))},addToTrack:function(t){var s=this.followed.indexOf(t);-1===s?(this.followed.push(t),this.$swal("已加入追蹤","","success")):(this.followed.splice(s,1),this.$swal("已取消追蹤","","success")),localStorage.setItem("followList",JSON.stringify(this.followed))}},computed:{filterCategories:function(){var t=this;return this.filterCategory?this.products.filter((function(s){var a=s.category.toLowerCase().includes(t.filterCategory.toLowerCase());return a})):this.products}},created:function(){this.getProducts()}},o=c,n=(a("ac44"),a("2877")),l=Object(n["a"])(o,e,r,!1,null,null,null);s["default"]=l.exports},ab13:function(t,s,a){var e=a("b622"),r=e("match");t.exports=function(t){var s=/./;try{"/./"[t](s)}catch(a){try{return s[r]=!1,"/./"[t](s)}catch(e){}}return!1}},ac44:function(t,s,a){"use strict";var e=a("dc16"),r=a.n(e);r.a},caad:function(t,s,a){"use strict";var e=a("23e7"),r=a("4d64").includes,i=a("44d2"),c=a("ae40"),o=c("indexOf",{ACCESSORS:!0,1:0});e({target:"Array",proto:!0,forced:!o},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},dc16:function(t,s,a){}}]);
//# sourceMappingURL=chunk-0db74c68.6fba989d.js.map